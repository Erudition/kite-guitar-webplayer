import{j as a,S as B,a as v,T as H,m as W,r as z,b as O,R as D,A as U,c as V,B as K,C as Y,d as X,_ as J,e as Q,h as Z,f as ee}from"./vendor.f95dfeaf.js";const te=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const i of o)if(i.type==="childList")for(const s of i.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&r(s)}).observe(document,{childList:!0,subtree:!0});function n(o){const i={};return o.integrity&&(i.integrity=o.integrity),o.referrerpolicy&&(i.referrerPolicy=o.referrerpolicy),o.crossorigin==="use-credentials"?i.credentials="include":o.crossorigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(o){if(o.ep)return;o.ep=!0;const i=n(o);fetch(o.href,i)}};te();const ne="_container_3mbda_1";var oe={container:ne};function re(e){function t(n,r){e.onChange!=null&&e.onChange(r)}return a("div",{className:oe.container,children:a(B,{onChange:t})})}var ie="/assets/Alesis-Fusion-Clean-Guitar-C3.65e32430.wav";const m={audioSamplePath:ie,audioSampleMainFrequency:130.81,guitarStringsCount:6,fretsPerString:36,minimumDrag:30,neckScrollEndPadding:32},d={horizontalModeStringContainerHeight:"50px",fretSize:"90px",openNoteSize:"70px",fretWireSize:"6px",nutSize:"24px",markerSize:"34px"};var h={isHorizontalMode(){return window.innerWidth>768}},c={rootFrequency:110,equalTemperament:{base:2,count:41,skipFretting:2},markers:[{fret:4,count:1},{fret:8,count:2},{fret:12,count:3},{fret:16,count:1},{fret:20,count:2},{fret:24,count:3},{fret:28,count:1},{fret:32,count:2},{fret:36,count:3}],stringsTuning:{InEdoStepsFromRoot:[1-13,1,1+13,1+13*2,1+13*3,1+13*4]},noteNamesFromRoot:["A","^A","^^A/vBb","vA#/Bb","A#/^Bb","^A#/vvB","vB","B","^B","vC","C","^C","^^C/vDb","vC#/Db","C#/^Db","C#^/vvD","vD","D","^D","^^D/vEb","vD#/Eb","D#/^Eb","^D#/vvE","vE","E","^E","vF","F","^F","^^F/vGb","vF#/Gb","F#/^Gb","^F#/vvG","vG","G","^G","^^G/vAb","vG#/Ab","G#/^Ab","vvA","vA"]};function R(e,t=2,n=0,r=1){const o=Math.pow(t,r);return Math.pow(o,n/e)}function ae(e,t,n){if(c.equalTemperament){const r=R(c.equalTemperament.count,c.equalTemperament.base,t,c.equalTemperament.skipFretting),o=c.stringsTuning.InEdoStepsFromRoot[e],i=R(c.equalTemperament.count,c.equalTemperament.base,o),s=c.rootFrequency/n;return r*i*s}return 1}function se(e,t){let o=(c.stringsTuning.InEdoStepsFromRoot[e]+t*c.equalTemperament.skipFretting)%c.noteNamesFromRoot.length;return o<0&&(o+=c.noteNamesFromRoot.length),c.noteNamesFromRoot[o]}function ce(){return c.markers||[]}var A={getRatioFromFret:ae,getNoteNameFromFret:se,getMarkers:ce};const ue="_fret_1aonj_1",le="_horizontal_1aonj_8",de="_noteContainer_1aonj_14",fe="_openNote_1aonj_22",me="_fretContainer_1aonj_41";var g={fret:ue,horizontal:le,noteContainer:de,openNote:fe,fretContainer:me};function P(e){const t=h.isHorizontalMode(),n=A.getNoteNameFromFret(e.guitarStringIndex,e.index);return v("div",{"data-guitarstring-index":e.guitarStringIndex,"data-fret-index":e.index,className:`
        ${g.fretContainer}
        ${t&&g.horizontal}`,children:[a("div",{className:`
          ${g.noteContainer}
          ${t&&g.horizontal} 
          ${e.isOpenNote&&g.openNote}`,children:a(H,{component:"span",children:n})}),!e.isOpenNote&&a("div",{className:`
            ${g.fret}
            ${t&&g.horizontal}`})]})}var S;(function(e){e[e.OnTouchNoteStart=0]="OnTouchNoteStart",e[e.OnTouchNoteEnd=1]="OnTouchNoteEnd"})(S||(S={}));const _=W(),I=[],b=[];function he(e,t,n){let r=!1,o=!1;const i=I[t];return i!==void 0?o=Math.abs(i-n)>e:r=!0,(r||o)&&(I[t]=n),r||o}function ge(e,t){const n=document.elementFromPoint(e,t);if(n){const r=parseInt(n.getAttribute("data-guitarstring-index")||""),o=parseInt(n.getAttribute("data-fret-index")||"");if(!isNaN(r)&&!isNaN(o))return{guitarStringIndex:r,fretIndex:o}}}function pe(e,t,n){var r=document.getElementById("touchIndicator"+e);!r||(r.style.top=n+"px",r.style.left=t+"px",r.style.display="block")}function ve(e){var t=document.getElementById("touchIndicator"+e);!t||(t.style.display="none")}function M(e,t,n){pe(e,t,n);const r=h.isHorizontalMode();if(he(m.minimumDrag,e,r?t:n)==!1)return;const i=ge(t,n);if(!i)return;const s=b[e];s&&s.guitarStringIndex===i.guitarStringIndex&&s.fretIndex===i.fretIndex||(b[e]=i,_.emit(0,i))}function G(e){I[e]=void 0;const t=b[e];t&&_.emit(1,t),b[e]=void 0,ve(e)}function Se(e){for(let t=0;t<e.touches.length;t++){const n=e.touches[t];M(n.identifier,n.pageX,n.pageY)}}function xe(e){const t=e.changedTouches[0];G(t.identifier)}let k=!1;function ze(e){k=!0,M(0,e.pageX,e.pageY)}function Ne(e){k!=!1&&M(0,e.pageX,e.pageY)}function ye(e){k=!1,G(0)}var f={handleTouch:Se,handleTouchEnd:xe,handleMouseDown:ze,handleMouseMove:Ne,handleMouseUp:ye,addEventListener:_.on,removeEventListener:_.off};const _e="_guitarString_1dey5_1",be="_horizontal_1dey5_12",Te="_vibrationAnim_1dey5_20",Ce="_vibration_1dey5_20",Ae="_vibrationAnimHorizontal_1dey5_32",Ie="_vibrationHorizontal_1dey5_1";var T={guitarString:_e,horizontal:be,vibrationAnim:Te,vibration:Ce,vibrationAnimHorizontal:Ae,vibrationHorizontal:Ie};function Me(e){const t=z.exports.useRef(null),n=h.isHorizontalMode();z.exports.useEffect(()=>(f.addEventListener(S.OnTouchNoteStart,r),()=>{f.removeEventListener(S.OnTouchNoteStart,r)}),[]);function r(i){i.guitarStringIndex===e.guitarStringIndex&&o()}function o(){if(t.current){const i=n?T.vibrationAnimHorizontal:T.vibrationAnim;t.current.classList.remove(i),t.current.offsetWidth,t.current.classList.add(i)}}return a("div",{ref:t,className:`
        ${T.guitarString}
        ${n&&T.horizontal}`})}const ke="_nutPiece_imbxo_1",Fe="_horizontal_imbxo_8";var j={nutPiece:ke,horizontal:Fe};function Ee(){const e=h.isHorizontalMode();return a("div",{className:`
        ${j.nutPiece}
        ${e&&j.horizontal}`,children:"\xA0"})}const we="_guitarStringContainer_eren0_1",$e="_horizontal_eren0_6";var L={guitarStringContainer:we,horizontal:$e};function He(e){const t=[...Array(m.fretsPerString)],n=h.isHorizontalMode();return v("div",{className:`
          ${L.guitarStringContainer}
          ${n&&L.horizontal}`,children:[a(Me,{guitarStringIndex:e.index}),a(P,{isOpenNote:!0,index:0,guitarStringIndex:e.index}),a(Ee,{}),t.map((r,o)=>a(P,{index:o+1,guitarStringIndex:e.index},`string${e.index}-fret${o+1}`))]})}const Oe="_scale_1cos8_1",De="_touchIndicator_1cos8_9";var N={scale:Oe,touchIndicator:De};const Re="_markerContainer_tg079_1",Pe="_horizontal_tg079_6",Ge="_marker_tg079_1";var F={markerContainer:Re,horizontal:Pe,marker:Ge};function je(e){const t=[...Array(e.count)],n=parseInt(d.fretSize.replace("px","")),r=parseInt(d.openNoteSize.replace("px","")),o=parseInt(d.fretWireSize.replace("px","")),i=parseInt(d.nutSize.replace("px","")),s=parseInt(d.markerSize.replace("px","")),u=r+i+(n+o)*(e.fretIndex-1)+(n+o)/2-s/2,l=h.isHorizontalMode();return a(O,{direction:l?"column":"row",justifyContent:"space-around",alignItems:"stretch",spacing:0,className:`
        ${F.markerContainer}
        ${l&&F.horizontal}`,style:l?{left:u+"px"}:{top:u+"px"},children:t.map((y,p)=>a("div",{className:F.marker,children:"\xA0"},"marker"+e.fretIndex+"-"+p))})}var Le=D.forwardRef(function(t,n){const r=[...Array(m.guitarStringsCount)],o=A.getMarkers(),i=h.isHorizontalMode();function s(){const u=parseInt(d.fretSize.replace("px","")),l=parseInt(d.openNoteSize.replace("px","")),y=parseInt(d.fretWireSize.replace("px","")),p=parseInt(d.nutSize.replace("px",""));return l+p+(u+y)*m.fretsPerString}return v(O,{direction:i?"column-reverse":"row",justifyContent:"space-between",alignItems:"stretch",spacing:0,className:N.scale,onMouseDown:f.handleMouseDown,onMouseMove:f.handleMouseMove,onMouseUp:f.handleMouseUp,onTouchStart:f.handleTouch,onTouchMove:f.handleTouch,onTouchEnd:f.handleTouchEnd,style:i?{marginLeft:t.scrollOffset+"px",width:s()+"px"}:{marginTop:t.scrollOffset+"px"},ref:n,children:[!i&&a("div",{id:"touchIndicator0",className:N.touchIndicator,children:"\xA0"}),!i&&a("div",{id:"touchIndicator1",className:N.touchIndicator,children:"\xA0"}),!i&&a("div",{id:"touchIndicator2",className:N.touchIndicator,children:"\xA0"}),!i&&a("div",{id:"touchIndicator3",className:N.touchIndicator,children:"\xA0"}),o.map((u,l)=>a(je,{fretIndex:u.fret,count:u.count},"marker"+l)),r.map((u,l)=>a(He,{index:l},"stringIdx"+l))]})});const qe="guitar-webplayer",Be="0.8.0",We={start:"vite --host",build:"tsc && vite build","build-ci":"vite build",preview:"vite preview"},Ue={"@emotion/react":"^11.7.1","@emotion/styled":"^11.6.0","@mui/icons-material":"^5.2.5","@mui/material":"^5.2.5",howler:"^2.2.3",mitt:"^3.0.0",react:"^17.0.2","react-dom":"^17.0.2","react-https-redirect":"^1.1.0"},Ve={"@types/howler":"^2.2.4","@types/react":"^17.0.33","@types/react-dom":"^17.0.10","@vitejs/plugin-react":"^1.0.7",typescript:"^4.4.4",vite:"^2.7.2"};var Ke={name:qe,version:Be,scripts:We,dependencies:Ue,devDependencies:Ve};function Ye(){return a(U,{position:"static",color:"primary",children:a(V,{children:v(H,{variant:"h6",sx:{flexGrow:1},children:["Kite Guitar ",v("small",{children:[" WebPlayer v",Ke.version]})]})})})}function Xe(){const[e,t]=z.exports.useState(0),n=z.exports.useRef(null),r=z.exports.useRef(null),o=h.isHorizontalMode();function i(s){var p,C,w,$;const u=(o?(p=r.current)==null?void 0:p.clientWidth:(C=r.current)==null?void 0:C.clientHeight)||0,l=(o?(w=n.current)==null?void 0:w.clientWidth:($=n.current)==null?void 0:$.clientHeight)||0,y=s/100*(u-l+m.neckScrollEndPadding);t(-y)}return v(K,{sx:{display:"flex",height:"100%",flexDirection:"column"},children:[a(Ye,{}),o&&a("div",{style:{height:"120px"},children:"\xA0"}),a(re,{onChange:i}),a(Y,{maxWidth:o?!1:"sm",sx:{flexGrow:1,overflow:"hidden"},ref:n,children:a(Le,{scrollOffset:e,ref:r})})]})}function Je(){const e=X({palette:{mode:"dark",primary:{main:"#ff7f50"},background:{paper:"#1a1515"}}});return a(J,{children:a(Q,{theme:e,children:a(Xe,{})})})}const x=[];function Qe(e,t){if(x.length==0)for(let r=0;r<e;r++){var n={inUse:!1,sound:new Z.Howl({src:[t]})};x.push(n)}}function q(e){if(x.length==0)throw"[AudioService] Audio channels were not initialized. You need to invoke AudioService.initAudioChannels(audioChannelsCount) before use play/stop";if(e<0||e>=x.length)throw`[AudioService] Invalid channel index: ${e}. Channels count: ${x.length}`;return x[e]}function Ze(e,t){const n=q(t);n.sound.volume(1),n.sound.rate(e),n.sound.play()}function et(e){q(e).sound.fade(1,0,500)}var E={initAudioChannels:Qe,playSoundNote:Ze,stopSoundNote:et};function tt(e){const t=A.getRatioFromFret(e.guitarStringIndex,e.fretIndex,m.audioSampleMainFrequency);E.initAudioChannels(m.guitarStringsCount,m.audioSamplePath),E.playSoundNote(t,e.guitarStringIndex)}function nt(e){E.stopSoundNote(e.guitarStringIndex)}function ot(){f.addEventListener(S.OnTouchNoteStart,tt),f.addEventListener(S.OnTouchNoteEnd,nt)}var rt={init:ot};rt.init();it();ee.render(a(D.StrictMode,{children:a(Je,{})}),document.getElementById("root"));function it(){const e=Object.keys(d),t=Object.values(d),n=e.map((r,o)=>`--${r}: ${t[o]};`).join(" ");document.documentElement.setAttribute("style",n)}
